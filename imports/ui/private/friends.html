<template name="friends">

    <form class="col s12" id="request">
      <div class="input-field col s12">
        <input type="text" name="friend_email" class="validate" />
        <label for="friend_email" data-error="Invalid Email">Friend Email</label>
      </div>
      <div class="col s12">
        <button type="submit" class="waves-effect waves-light btn col s12 blue-grey lighten-1">Submit Friend Request</button>
      </div>
    </form>

    <h3>Sent Friend Requests</h3>
    {{#each sentFriendRequestsList}}
      <h5>{{receiver.username}} ({{receiver.email}})</h5>
    {{/each}}

    <h3>Received Friend Requests</h3>
    {{#each receivedFriendRequestsList}}
      <h5>{{sender.username}} ({{sender.email}})</h5>
      <form class="col s12" id="accept">
        <div class="col s12">
          <input type="submit" name="accept" class="waves-effect waves-light btn col s12 blue-grey lighten-1" value="Accept" />
        </div>
      </form>
      <form class="col s12" id="decline">
        <div class="col s12">
          <input type="submit" name="accept" class="waves-effect waves-light btn col s12 blue-grey lighten-1" value="Decline" />
        </div>
      </form>
    {{/each}}

    <h3>Friends</h3>
    {{#each friendsList}}
      {{#each friends}}
        <h5>{{friend.username}} ({{friend.email}})</h5>
        <form class="col s12" id="unfriend">
          <div class="col s12">
            <input type="submit" name="unfriend" class="waves-effect waves-light btn col s12 blue-grey lighten-1" value="Unfriend" />
          </div>
        </form>
      {{/each}}
    {{/each}}

    {{> groups}}
</template>

<template name="groups">
  <form class="col s12" id="new_group">
      <div class="input-field col s12">
        <input type="text" name="group_name" class="validate" />
        <label for="group_name">Group Name</label>
      </div>
      <div class="col s12">
        <button type="submit" class="waves-effect waves-light btn col s12 blue-grey lighten-1">Create Group</button>
      </div>
    </form>
    {{#each groupsList}}
      {{> group }}
    {{/each}}
</template>

<template name="group">
  <h4>{{groupName}}</h4>
  <!-- Modal Trigger -->
  <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Add Friends to Group</a>

  <!-- Modal Structure -->
  <div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
      <h5>Friends</h5>
      <ul id="friends">
        {{#each friendsList}}
          {{#each friends}}
            <li>
              <input type="checkbox" class="filled-in" id="{{userId}}" value="{{username}}" data-email="{{email}}"/>
              <label for="{{userId}}">{{username}} ({{email}})</label>
            </li>
          {{/each}}
        {{/each}}
      </ul>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Add</a>
    </div>
  </div>
  {{#each friends}}
    <p>{{friend.username}}</p>
  {{/each}}
</template>
